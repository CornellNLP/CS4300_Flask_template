<!-- Code references:
https://stackoverflow.com/questions/29738787/filling-water-animation/29740828#29740828
https://www.mkronenfeld.de/filling-liquid-animation/
https://stackoverflow.com/questions/24210132/remove-border-radius-from-select-tag-in-bootstrap-3/24766039
https://getbootstrap.com/docs/4.4/examples/cover/ -->

<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>pick your poison</title>

      <link rel="stylesheet" href="/static/bootstrap.min.css">
      <link rel="stylesheet" href="/static/style.css">
      <link rel="stylesheet" type="text/css" href="/static/jquery.tagsinput-revisited.css">
      <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

   </head>
   <body class="text-center search">

      <!-- Wave Graphic -->
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" style="display: none;">
         <symbol id="wave">
            <path class="waveShape" d="M300 300V2.5s-.6-.1-1.1-.1c0 0-25.5-2.3-40.5-2.4-15 0-40.6 2.4-40.6 2.4-12.3 1.1-30.3 1.8-31.9 1.9-2-.1-19.7-.8-32-1.9 0 0-25.8-2.3-40.8-2.4-15 0-40.8 2.4-40.8 2.4-12.3 1.1-30.4 1.8-32 1.9-2-.1-20-.8-32.2-1.9 0 0-3.1-.3-8.1-.7V300h300z"/>
         </symbol>
      </svg>
      <div class="liquid">
         <svg viewBox="0 0 300 20" class="liquid__wave">
            <use xlink:href="#wave"></use>
         </svg>
      </div>

      <div class="cover-container d-flex w-100 h-100 mx-auto flex-column">
         <header class="masthead mb-auto">
            <div class="inner">
               <h3 class="masthead-brand"><a href="/">pick your poison</a></h3>
            </div>
         </header>

         <main role="main" class="inner cover">
            <form class="main-form" method="GET" action="/search">
               <input type="hidden" name="page" value="1" />
               <p class="lead d-flex justify-content-between text-nowrap">
                  <span>I would like to drink </span>
                  <label class="sr-only" for="type-input">drink type</label>
                  <select id="type-input" name="type" class="form-control mb-2" onchange="checkCocktail(this);">
                     <option>anything</option>
                     <option>wine</option>
                     <option>beer</option>
                     <option>liquor</option>
                     <option>cocktail</option>
                  </select>
               </p>
               <p id="base-line" class="lead justify-content-between text-nowrap" style="display: none;">
                  <span>I want the base to be </span>
                  <label class="sr-only" for="base-input">base</label>
                  <input id="base-input" type="text" name="base" class="form-control mb-2" placeholder="any base">
               </p>
               <p class="lead d-flex justify-content-between text-nowrap">
                  <span>It should be </span>
                  <label class="sr-only" for="descriptors-input">descriptors</label>
                  <input id="descriptors-input" type="text" name="descriptors" class="form-control mb-2 tagsinput">
               </p>
               <p id="price-line" class="lead justify-content-between text-nowrap" style="display: flex;">
                  <span>It costs between </span>
                  <label class="sr-only" for="minprice-input">minimum price</label>
                  <input id="minprice-input" type="text" name="minprice" class="form-control mb-2 mr-3" placeholder="any price">
                  <span> and</span>
                  <label class="sr-only" for="maxprice-input">maximum price</label>
                  <input id="maxprice-input" type="text" name="maxprice" class="form-control mb-2" placeholder="any price">
               </p>
               <p id="abv-line" class="lead justify-content-between text-nowrap" style="display: flex;">
                  <span>Its ABV is between </span>
                  <label class="sr-only" for="minabv-input">minimum abv</label>
                  <input id="minabv-input" type="text" name="minabv" class="form-control mb-2 mr-3" placeholder="any ABV">
                  <span> and</span>
                  <label class="sr-only" for="maxprice-input">maximum price</label>
                  <input id="maxabv-input" type="text" name="maxabv" class="form-control mb-2" placeholder="any ABV">
               </p>
               <p class="lead mt-5 mx-auto">
                  <button type="submit" class="btn btn-lg btn-secondary">pick my poison</button>
               </p>
            </form>
         </main>

         <footer class="mastfoot mt-auto">
            <div class="inner">
               <p>created by Derek Cheng, Collin Montag, DB Lee, Dana Luong, and Ishneet Sachar</p>
            </div>
         </footer>
      </div>
   
      <!-- Bootstrap JS -->
      <script src="https://code.jquery.com/jquery-3.5.0.min.js" crossorigin="anonymous"></script>
      <script src="//code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

      <!-- <script src="/static/tagsinput.js"></script>
      <script src="/static/typeahead.bundle.min.js"></script> -->
      <script src="/static/jquery.tagsinput-revisited.js"></script>
      
      <script>
         const descriptors = {{descriptors|tojson}};
         $('.tagsinput').tagsInput({
            'width': '100%',
            'placeholder': 'eg. "light bodied, luminous, lush"',
            'autocomplete': {
               source: descriptors
            },
            'values': descriptors
         });

         function checkCocktail(select) {
            if (select.value == 'cocktail') {
               document.getElementById('base-line').style.display = 'flex';
               document.getElementById('price-line').style.display = 'none';
               document.getElementById('abv-line').style.display = 'none';
            } else {
               document.getElementById('base-line').style.display = 'none';
               document.getElementById('price-line').style.display = 'flex';
               document.getElementById('abv-line').style.display = 'flex';
            }
         }

         $( function() {
            var availableTags = ['vodka', 'Midori', 'sloe', 'lychee', 'Chambord', 'Averna', 'beer', 'Campari', 'coffee', 'banana', 'sherry', 'Champagne', 'Mekhong', 'Jagermeister', 'Irish', 'Pimm', 'sake', 'nonalcoholic', 'RumChata', 'peach', 'absinthe', 'rum', 'Galliano', 'Southern', 'melon', 'Benedictine', 'brandy', 'tequila', 'pisco', 'shooter', 'chocolate', 'gin', 'Cointreau', 'whiskey', 'cachaca', 'Strega', 'vermouth', 'wine', 'cacha√ßa', 'Frangelico', 'Grand', 'TyKu', 'Agavero'];
            $( "#base-input" ).autocomplete({
               source: availableTags
            });
         } );

         $(function() {
            $(".main-form").submit(function()
            {
               $(this).find(":input").filter(function(){ return !this.value; }).attr("disabled", "disabled");

               return true; // ensure form still submits
            });
         });
      </script>
   </body>
</html>
